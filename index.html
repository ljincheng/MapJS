<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script type="text/javascript" src="src/HEADER.js"></script>
        <script type="text/javascript" src="src/globalGeomap.js"></script>
        <script type="text/javascript" src="src/lib/event.js"></script>
        <script type="text/javascript" src="src/core/Observable.js"></script>
        <script type="text/javascript" src="src/core/util.js"></script>
        <script type="text/javascript" src="src/core/lang_common.js"></script>
        <script type="text/javascript" src="src/core/util_object.js"></script>
        <script type="text/javascript" src="src/core/util_element.js"></script>
        <script type="text/javascript" src="src/core/util_event.js"></script>
        <script type="text/javascript" src="src/core/Class.js"></script>
        <script type="text/javascript" src="src/geo/geomap_point.js"></script>
        <script type="text/javascript" src="src/geo/geomap_transformation.js"></script>
        <script type="text/javascript" src="src/event/Event.js"></script>
        <script type="text/javascript" src="src/event/Drag.js"></script>
        
        <script type="text/javascript" src="src/geo/geomap_bounds.js"></script>
        <script type="text/javascript" src="src/geo/geomap_coord.js"></script>
        <script type="text/javascript" src="src/geo/geomap_model.js"></script>
        <script type="text/javascript" src="src/geo/geomap_event.js"></script>
        <script type="text/javascript" src="src/geo/handler/Map_Event.js"></script>
        <script type="text/javascript" src="src/geo/geomap_map.js"></script>
        <script type="text/javascript" src="src/geo/geomap_layer.js"></script>
        
    </head>
<body onload="winLoad()" style="margin: 0px; padding:0px;">
<div id="mapDiv"></div>
  <div id="debugDiv" style="position: absolute;left:0px;bottom: 0px; overflow-y: hidden;"></div>   
 <div id="imagePlan"></div>
 <script type="text/javascript">
    //  var rootDiv=null;
    //  var startXY=[0,0];
    //  var myOP=0;
       

    //     function dragingFn(){
            
    //         var speed=geomap.util.event.speeding();
    //       //  console.log("speed="+speed[0]+","+speed[1]+",startXY="+startXY[0]+","+startXY[1]);
    //         var pos=geomap.util.matrixAdd(speed,startXY);
    //         startXY=pos;
    //      //   console.log("pos="+pos[0]+","+pos[1]+",startXY="+startXY[0]+","+startXY[1]);
    //         rootDiv.style.left=(pos[0]-50)+"px";
    //         rootDiv.style.top=(pos[1]-50)+"px";
    //     }

    function winLoad(){
        var winWidth=window.innerWidth;
        var winHeight=window.innerHeight;
    var url="http://fabricjs.com/article_assets/9.png";

    

    // geomap.util.loadImage(url, function(img, isError) {
    //      document.getElementById("imagePlan").appendChild(img);
    //     }, null, null);

    var mapHeight=Math.floor( winHeight/2);
    var debugDiv=document.getElementById("debugDiv");
    debugDiv.style.top=mapHeight+"px";
    debugDiv.style.height=mapHeight+"px";
    debugDiv.style.width=winWidth+"px";
    var debugTxtList=["","","","","","","","","","","","","","","","","","","","","","","","",""];
    function writeDebug(txt){

        debugTxtList.push(txt)
        debugTxtList.shift();
        var html="";
        for(var i=debugTxtList.length-1;i>=0;i--){
            var txt=debugTxtList[i];
            html+="<br>"+txt;
        }
        //var html=txt+"<br>"+debugDiv.innerHTML;
        debugDiv.innerHTML=html;
        
    };
    var map=new geomap.Map(document.getElementById("mapDiv"),{width:winWidth,height:mapHeight,maxZoom:17,zoom:2,debug:writeDebug});
    var tileLayer=new geomap.Layer({});
    map.addLayer(tileLayer);
    // map.on("wheel",function(opt){
    //     geomap.log("wheel ON="+opt.self.wheelDelta);
    // });
    // console.log("MAP options(width="+map.width+")");

    // var eventEl=document.getElementById("_map_root");
    // rootDiv=document.getElementById("_map_layer");
    // eventjs.add(eventEl,"click",function(event,self){
    //     console.log("CLICK=",self.gesture,self.x,self.y);
    // });
    // eventjs.add(eventEl,"drag",function(event,self){
    //     console.log("drag=",self.gesture,self.x,self.y, "fingers=",self.fingers,"state=",self.state,"start=",self.start,self.bbox);
        
    //  geomap.util.event.moving(self.x,self.y);
     
    //     if(self.state=="down"){
    //         myOP=1;
    //         startXY=[self.x,self.y];
    //         geomap.util.event.speedStart(self.x,self.y);
    //     }else if(self.state =="up"){
    //         myOP=0;
    //       //  startXY=[self.x,self.y];
    //         geomap.util.event.speedEnd();       
    //     }else if(self.state =="move"){
    //         geomap.util.event.moving(self.x,self.y);
    //         if(myOP==1){
    //             startXY=[self.x,self.y];
    //         }

    //     }else{
    //         myOP=0;
    //       //  startXY=[self.x,self.y];
    //         geomap.util.event.speedEnd();
    //     }
       
    // });
    console.log("hello !");
    // setInterval(dragingFn,20);

    /// Prevent native scrolling in iOS.
eventjs.add(document.body, 'touchmove', eventjs.prevent);

/// Prevent right-click on desktops.
eventjs.add(document.body, 'contextmenu', eventjs.prevent);

/// Prevent elastic scrolling.
eventjs.add(document, 'touchstart', eventjs.prevent);
 }


</script>   
</body>
</html>