<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script type="text/javascript" src="../../dist/geomap.js"></script>
        
    </head>
<body onload="winLoad()"  style="margin: 0px; padding:0px;">
 <img id="elephant"/>
 <br>
 <canvas id="canvasTest" style="width:500px; height:300px; border: 1px solid red;"></canvas>
   
<script type="text/javascript">
    var testImgUrl="https://c.tile.openstreetmap.org/1/0/0.png?cacheTime=1619191877795";
    
   
   function winLoad(){
       var dbName="elephants";
     var dbStore=new geomap.DBStore({dbNames:[dbName],dbFile:"elephantFiles"});
     dbStore.on("open_success",function(){
        dbStore.getStore(dbName,testImgUrl).then( function(event){
               var imgFile = event.target.result;
               if(imgFile !=undefined){
               var URL = window.URL || window.webkitURL;
                var imgURL = URL.createObjectURL(imgFile); 
                var imgElephant = document.getElementById("elephant");
                imgElephant.src=imgURL;

                dbStore.putStore(dbName,"test",imgFile);
               }
           });
            });
     
   
   }
    
</script>  
</body>
</html>
